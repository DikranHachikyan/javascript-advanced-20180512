const {EventEmitter} = require('events');

console.log('Run Module Code');

module.exports.UploadManager = class UploadManager extends EventEmitter{
    constructor(){
        super();
    }

    //let _this = this;
    upload(url){
        let progress = 0,
            fileSize = 0;

        console.log(`Upload Started ${url}`);

        let progressInterval = setInterval(()=>{
            progress += 20;
            fileSize += 50;
            super.emit('progress', {'progress': progress, 'size':fileSize});

            if( progress === 100 ){
                clearInterval(progressInterval);
                super.emit('finished', fileSize);
            }
        }, 1000);


    }
}


module.exports.show = (message)=>console.log(message);